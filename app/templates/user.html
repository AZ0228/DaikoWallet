{% extends "base.html" %}

{% block content %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/post.css') }}">
    <table>
        <tr valign="top">
            <td><img src="{{ user.avatar(128) }}"></td>
            <td>
                <h1>User: {{ user.username }}</h1>
                {% if user.about_me %}<p>{{ user.about_me }}</p>{% endif %}
                {% if user.last_seen %}<p>Last seen on: {{ user.last_seen }}</p>{% endif %}
                {% if user == current_user %}
                <p><a href="{{ url_for('settings') }}">edit settings</a></p>
                {% elif current_user.friends_status(user) == 0 %}
                <p>
                    <form action="{{ url_for('send_friend_request', user_id=current_user.id, friend_id=user.id ) }}" method="post">
                        {{ form.hidden_tag() }}
                        {{ form.submit(value='send friend request') }}
                    </form>
                </p>
                {% elif current_user.friends_status(user) == 1 %}
                <p>
                    <form action="{{ url_for('accept_friend_request', user_id=current_user.id, friend_id=user.id ) }}" method="post">
                        {{ form.hidden_tag() }}
                        {{ form.submit(value='accept friend request') }}
                    </form>
                </p>
                {% elif current_user.friends_status(user) == 2 %}
                <p>
                    <form action="{{ url_for('unfriend')}}" method="post">
                        {{ form.hidden_tag() }}
                        {{ form.submit(value='requested') }}
                    </form>
                </p>
                {% else %}
                <p>
                    <form action="{{ url_for('unfriend')}}" method="post">
                        {{ form.hidden_tag() }}
                        {{ form.submit(value='unfriend') }}
                    </form>
                </p>

                {% endif %}
            </td>
        </tr>
    </table>
    
    {% for expense in expenses %}
        {% include '_post.html' %}
    {% endfor %}
{% endblock %}